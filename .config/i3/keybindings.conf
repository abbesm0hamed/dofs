# Core i3 window management
# Focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Layout controls
bindsym $mod+z split v
bindsym $mod+x split h
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+s layout stacking
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+b move workspace to output next

# Workspace management
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# System controls
bindsym $mod+Shift+q kill
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart

# Resize mode
mode "resize" {
        bindsym h resize grow width 5 px or 5 ppt
        bindsym j resize shrink height 5 px or 5 ppt
        bindsym k resize grow height 5 px or 5 ppt
        bindsym l resize shrink width 5 px or 5 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# Screenshot tools
bindsym $mod+Shift+z exec --no-startup-id mkdir -p "$HOME/Pictures/Screenshots"
bindsym Mod1+$mod+s exec --no-startup-id flameshot screen
bindsym Mod1+Shift+s exec --no-startup-id flameshot full
bindsym Control+Mod1+s exec --no-startup-id flameshot gui

# Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +3%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -3%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym Mod1+d exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +3%
bindsym Mod1+a exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -3%

# Media player controls
bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym Control+Mod1+p exec --no-startup-id playerctl play-pause
bindsym XF86AudioNext exec --no-startup-id playerctl next
bindsym XF86AudioPrev exec --no-startup-id playerctl previous
bindsym Control+Shift+period exec --no-startup-id playerctl next
bindsym Control+Shift+comma exec --no-startup-id playerctl previous
bindsym XF86AudioStop exec --no-startup-id playerctl stop

# MPD controls
bindsym Mod1+Shift+h exec --no-startup-id mpc prev
bindsym Mod1+Shift+j exec --no-startup-id mpc next
bindsym Mod1+Shift+k exec --no-startup-id mpc play
bindsym Mod1+Shift+l exec --no-startup-id mpc pause

# Polybar control
bindsym $mod+y exec --no-startup-id polybar-msg cmd toggle

# Application shortcuts
bindsym $mod+F1 exec --no-startup-id vivaldi-stable
bindsym $mod+F2 exec --no-startup-id atom
bindsym $mod+F3 exec --no-startup-id inkscape
bindsym $mod+F4 exec --no-startup-id gimp
bindsym $mod+F5 exec --no-startup-id meld
bindsym $mod+F6 exec --no-startup-id vlc --video-on-top
bindsym $mod+F7 exec --no-startup-id virtualbox
bindsym $mod+F8 exec --no-startup-id thunar
bindsym $mod+F9 exec --no-startup-id lollypop
bindsym $mod+F10 exec --no-startup-id spotify

# Rofi menus
bindsym $mod+p exec --no-startup-id "rofi -no-config -no-lazy-grab -theme-str 'window {width: 50%;height: 60%;}' -show drun -show-icons -modi drun -theme ~/.config/rofi/config.rasi"
bindsym $mod+c exec --no-startup-id rofi -show combi
bindsym $mod+Tab exec --no-startup-id rofi -show window
bindsym $mod+F11 exec --no-startup-id "rofi -theme-str 'window {width: 100%;height: 100%;}' -show drun -show-icons"
bindsym $mod+F12 exec --no-startup-id rofi -show drun

# Additional application shortcuts
bindsym $mod+b exec --no-startup-id brave
bindsym $mod+g exec --no-startup-id google-chrome-stable

# Quick settings and power menu
bindsym $mod+Mod1+o exec --no-startup-id ~/.config/polybar/scripts/quick-settings.sh
bindsym $mod+Mod1+l exec --no-startup-id ~/.config/polybar/scripts/powermenu.sh

# Scratchpad terminals
bindsym $mod+Control+g exec --no-startup-id "~/.config/scripts/toggle-scratchpad.sh kitty_scratchpad 'kitty --class kitty_scratchpad'"
bindsym $mod+Control+b exec --no-startup-id "~/.config/scripts/toggle-scratchpad.sh btop 'kitty --class btop -e btop'"
bindsym $mod+Control+r exec --no-startup-id "~/.config/scripts/toggle-scratchpad.sh ranger 'kitty --class ranger -e ranger'"
bindsym $mod+Control+o exec --no-startup-id "~/.config/scripts/toggle-scratchpad.sh yazi 'kitty --class yazi -e yazi'"

# Terminal emulators
bindsym $mod+Return exec --no-startup-id kitty
bindsym Mod1+Return exec --no-startup-id wezterm
bindsym Control+Mod1+Return exec --no-startup-id ghostty
bindsym Control+Mod1+t exec --no-startup-id alacritty

# Additional controls
bindsym $mod+Mod1+k exec --no-startup-id conky-toggle
bindsym $mod+Mod1+c exec --no-startup-id killall conky
bindsym $mod+Shift+x exec --no-startup-id archlinux-logout
bindsym Control+Mod1+r exec --no-startup-id rofi-theme-selector
bindsym Control+Mod1+e exec --no-startup-id archlinux-tweak-tool

# Keyboard layout switching
# exec_always --no-startup-id "setxkbmap -layout us,fr -option grp:alt_shift_toggle"
# bindsym ISO_Next_Group exec --no-startup-id "setxkbmap -query | grep -q 'layout:\s\+us' && setxkbmap fr || setxkbmap us"
