services:
  php:
    image: php:7.4-cli
    container_name: php_container
    volumes:
      - ./:/app
    working_dir: /app
    command: >
      bash -c "apt-get update && apt-get install -y libzip-dev unzip git zsh &&
               docker-php-ext-install pdo_mysql zip &&
               pecl install redis && docker-php-ext-enable redis &&
               curl -sS https://getcomposer.org/installer | php &&
               mv composer.phar /usr/local/bin/composer &&
               chmod +x /usr/local/bin/composer &&
               tail -f /dev/null"
    environment:
      - COMPOSER_ALLOW_SUPERUSER=1
    restart: unless-stopped
    networks:
      - php_network

networks:
  php_network:
    driver: bridge
